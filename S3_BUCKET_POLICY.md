# S3バケットポリシー設定ガイド

## 問題
`AccessControlListNotSupported: The bucket does not allow ACLs` エラーが発生する場合、S3バケットがACLをサポートしていません。

## 解決方法

### 1. バケットポリシーでパブリックアクセスを許可

AWSコンソールで以下の手順を実行してください：

1. S3コンソールにアクセス
2. 対象のバケットを選択
3. 「アクセス許可」タブを開く
4. 「バケットポリシー」セクションで「編集」をクリック
5. 以下のポリシーを貼り付けて、`YOUR_BUCKET_NAME`を実際のバケット名に置き換えてください：

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "PublicReadGetObject",
      "Effect": "Allow",
      "Principal": "*",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::YOUR_BUCKET_NAME/*"
    }
  ]
}
```

### 2. パブリックアクセスブロック設定の確認

1. 同じ「アクセス許可」タブで「パブリックアクセスブロック設定」を確認
2. 「パブリックアクセスをブロック」の設定を確認
3. 必要に応じて、以下の設定を無効化：
   - 「新しいパブリックバケットポリシーをブロック」を無効化
   - 「パブリックアクセスを許可するバケットポリシーを通じて付与されたパブリックアクセスをブロック」を無効化

### 3. オブジェクト所有権の設定（オプション）

1. 「アクセス許可」タブの「オブジェクト所有権」セクションを確認
2. 「ACL無効（推奨）」が選択されている場合、バケットポリシーを使用する必要があります
3. 「ACL有効」に変更することも可能ですが、バケットポリシーの使用を推奨します

## 注意事項

- パブリックアクセスを許可すると、誰でも画像URLにアクセスできるようになります
- セキュリティ要件に応じて、必要に応じてCloudFrontや署名付きURLを使用することを検討してください
- 本番環境では、適切なセキュリティ設定を実施してください

